<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>ROS Basics - Ctrl-P</title> <!-- Add FontAwesome to the site--> <!-- <script src="https://kit.fontawesome.com/a25c836932.js" crossorigin="anonymous"></script> --> <script type="text/javascript"> (function() { var css = document.createElement('link'); css.href = 'https://use.fontawesome.com/releases/v5.15.1/css/all.css'; css.rel = 'stylesheet'; css.type = 'text/css'; document.getElementsByTagName('head')[0].appendChild(css); })(); </script> <!-- <script defer src="/latest/assets/css/fontawesome-free-5.15.1-web/js/all.js" rel="stylesheet"></script> --> <!-- Add JQuery to the site--> <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script> <link rel="shortcut icon" href="/latest/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/latest/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-98839874-5"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-98839874-5'); </script> <script type="text/javascript" src="/latest/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/latest/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>ROS Basics | Ctrl-P</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="ROS Basics" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A custom pneumatic control system featuring smooth control of pressure at a high bandwidth." /> <meta property="og:description" content="A custom pneumatic control system featuring smooth control of pressure at a high bandwidth." /> <link rel="canonical" href="/latest/ros-driver/ros-basics" /> <meta property="og:url" content="/latest/ros-driver/ros-basics" /> <meta property="og:site_name" content="Ctrl-P" /> <script type="application/ld+json"> {"headline":"ROS Basics","description":"A custom pneumatic control system featuring smooth control of pressure at a high bandwidth.","url":"/latest/ros-driver/ros-basics","@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/latest/assets/img/soft_hand.svg"}},"@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/latest/" class="site-title lh-tight"> <div class="site-logo"></div> <div class="site-title-text">Ctrl-P</div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/latest/" class="nav-list-link"> <div class=nav-icons><i class="fas fa-home"></i></div> Home </a></li><li class="nav-list-item"><a href="/latest/hardware" class="nav-list-link"> <div class=nav-icons><i class="fas fa-tools"></i></div> Hardware </a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/latest/firmware" class="nav-list-link"> <div class=nav-icons><i class="fas fa-microchip"></i></div> Firmware </a><ul class="nav-list "><li class="nav-list-item nav-bullets"><a href="/latest/firmware/firmware_interface" class="nav-list-link">Firmware Interface</a></li><li class="nav-list-item nav-bullets"><a href="/latest/firmware/firmware_commands" class="nav-list-link">Firmware Commands</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/latest/top-level" class="nav-list-link"> <div class=nav-icons><i class="fas fa-laptop-code"></i></div> Python Interface </a><ul class="nav-list "><li class="nav-list-item nav-bullets"><a href="/latest/top-level/setup" class="nav-list-link">Hardware Setup</a></li><li class="nav-list-item nav-bullets"><a href="/latest/top-level/tutorial" class="nav-list-link">Tutorial</a></li><li class="nav-list-item nav-bullets"><a href="/latest/top-level/python-tips" class="nav-list-link">Python Tips</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/latest/ros-driver" class="nav-list-link"> <div class=nav-icons><i class="fas fa-robot"></i></div> ROS Driver </a><ul class="nav-list "><li class="nav-list-item nav-bullets active"><a href="/latest/ros-driver/ros-basics" class="nav-list-link active">ROS Basics</a></li><li class="nav-list-item nav-bullets"><a href="/latest/ros-driver/setup" class="nav-list-link">Hardware Setup</a></li><li class="nav-list-item nav-bullets"><a href="/latest/ros-driver/control-setup" class="nav-list-link">Control Setup</a></li><li class="nav-list-item nav-bullets"><a href="/latest/ros-driver/tutorial" class="nav-list-link">Basic Tutorial</a></li><li class="nav-list-item nav-bullets"><a href="/latest/ros-driver/tutorial-realtime" class="nav-list-link">Realtime Control</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/latest/skills" class="nav-list-link"> <div class=nav-icons><i class="fas fa-running"></i></div> Pressure Skills </a><ul class="nav-list "><li class="nav-list-item nav-bullets"><a href="/latest/skills/setup" class="nav-list-link">Setup</a></li><li class="nav-list-item nav-bullets"><a href="/latest/skills/tutorial" class="nav-list-link">Tutorial</a></li></ul></li><li class="nav-list-item"><a href="/latest/gallery" class="nav-list-link"> <div class=nav-icons><i class="fas fa-images"></i></div> Photo Gallery </a></li><li class="nav-list-item"><a href="/latest/todo" class="nav-list-link"> <div class=nav-icons><i class="fas fa-tasks"></i></div> TODO </a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Ctrl-P" aria-label="Search Ctrl-P" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/cbteeple/pressure_controller" class="site-button" target="_blank" rel="noopener noreferrer" > Firmware <i class="aux-icon fab fa-github"></i> </a> </li> <li class="aux-nav-list-item"> <a href="//github.com/cbteeple/pressure_control_interface" class="site-button" target="_blank" rel="noopener noreferrer" > Python Interface <i class="aux-icon fab fa-github"></i> </a> </li> <li class="aux-nav-list-item"> <a href="//github.com/cbteeple/pressure_control_cbt" class="site-button" target="_blank" rel="noopener noreferrer" > ROS Driver <i class="aux-icon fab fa-github"></i> </a> </li> <li> <div class="version-selector"> <div>Version:</div> <div> <select onchange="switch_version(this)" name="version" id="version_selecter"> <option selected value="/latest/ros-driver/ros-basics">latest</option> <option value="/v2.0/ros-driver/ros-basics">v2.0</option> <option value="/v1.0/ros-driver/ros-basics">v1.0</option> </select> </div> </div> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/latest/ros-driver">ROS Driver</a></li> <li class="breadcrumb-nav-list-item"><span>ROS Basics</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="ros-basics"> <a href="#ros-basics" class="anchor-heading" aria-labelledby="ros-basics"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ROS Basics </h1> <ol id="markdown-toc"> <li><a href="#install-ros" id="markdown-toc-install-ros">Install ROS</a></li> <li><a href="#make-a-catkin-workspace" id="markdown-toc-make-a-catkin-workspace">Make a Catkin Workspace</a></li> <li><a href="#installing-ros-packages" id="markdown-toc-installing-ros-packages">Installing ROS packages</a></li> <li><a href="#ros-programming-paradigms" id="markdown-toc-ros-programming-paradigms">ROS programming paradigms</a></li> <li><a href="#running-programs" id="markdown-toc-running-programs">Running Programs</a></li> </ol><hr /> <h2 id="install-ros"> <a href="#install-ros" class="anchor-heading" aria-labelledby="install-ros"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Install ROS </h2> <p>Follow the instructions for <a href="http://wiki.ros.org/ROS/Installation">installing ROS</a>. You should match the version of ROS to the version of Ubuntu you are using.</p> <ul> <li>Ubuntu 20.04 – ROS Noetic</li> <li>Ubuntu 18.04 – ROS Melodic</li> <li>Ubuntu 16.04 – ROS Kinetic</li> </ul> <p>For this package, you should use the “desktop-full” installation option.</p> <h3 id="setting-up-the-terminal-to-play-nicely-with-ros"> <a href="#setting-up-the-terminal-to-play-nicely-with-ros" class="anchor-heading" aria-labelledby="setting-up-the-terminal-to-play-nicely-with-ros"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up the terminal to play nicely with ROS </h3> <p>Add your ROS installation to your .bashrc file so it gets loaded when every time you open a new terminal:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"source /opt/ros/noetic/setup.bash"</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nb">source</span> ~/.bashrc
</code></pre></div></div> <h2 id="make-a-catkin-workspace"> <a href="#make-a-catkin-workspace" class="anchor-heading" aria-labelledby="make-a-catkin-workspace"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Make a Catkin Workspace </h2> <p>Follow the tutorial for <a href="http://wiki.ros.org/catkin/Tutorials/create_a_workspace">making a new workspace</a>. I usually create my worskapces in the “Documents” folder rather than the home folder, so step 1 of the tuorial becomes:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> ~/Documents/[WORKSPACE NAME]/src
<span class="nb">cd</span> ~/Documents/[WORKSPACE NAME]
catkin_make
</code></pre></div></div> <h3 id="setting-up-the-terminal-to-play-nicely-with-your-new-workspace"> <a href="#setting-up-the-terminal-to-play-nicely-with-your-new-workspace" class="anchor-heading" aria-labelledby="setting-up-the-terminal-to-play-nicely-with-your-new-workspace"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up the terminal to play nicely with your new workspace </h3> <p>Add your new catkin workspace to your .bashrc file so it gets loaded when every time you open a new terminal:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"source /home/[USERNAME]/Documents/[WORKSPACE NAME]/devel/setup.bash"</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nb">source</span> ~/.bashrc
</code></pre></div></div> <p>where <code class="language-plaintext highlighter-rouge">[USERNAME]</code> is your computer’s username, and <code class="language-plaintext highlighter-rouge">[WORKSPACE NAME]</code> is the name of your workspace folder.</p> <h2 id="installing-ros-packages"> <a href="#installing-ros-packages" class="anchor-heading" aria-labelledby="installing-ros-packages"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installing ROS packages </h2> <p>ROS packages can be installed either using <code class="language-plaintext highlighter-rouge">apt-get install</code> if they have official packages (like MoveIt! or Gazebo), or built from source.</p> <p>The pressure controller package must be built from source:</p> <ul> <li>Clone the repo into the <code class="language-plaintext highlighter-rouge">src</code> directory in your catkin workspace.</li> <li>To build packages, run <code class="language-plaintext highlighter-rouge">catkin_make</code> from your workspace folder. (<em>Note: you must run this from the workspace folder, not any subfolders or anywhere else</em>)</li> </ul> <h2 id="ros-programming-paradigms"> <a href="#ros-programming-paradigms" class="anchor-heading" aria-labelledby="ros-programming-paradigms"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ROS programming paradigms </h2> <p>ROS has three main programming paradigms it uses to send/recieve messages and do things with them:</p> <ol> <li>Publishers/Subscribers: Send/Recieve messages to and from topics. <ul> <li>Publishers send data to topics.</li> <li>Subscribers poll for new messages on particular topics, and perform something when a new message comes in.</li> </ul> </li> <li>Services: Event-based programs. These are blocking, so a service MUST finish before the program that called it can move forward. <ul> <li>These should only ever be used for executing tiny calculations or triggering short actions.</li> </ul> </li> <li>Action Servers: Event-based programs. A goal is sent to an action server by another node, and the prgram does something in response. This is non-blocking. <ul> <li>Most modern drivers for running real hardware use this type of node (including this package).</li> </ul> </li> </ol> <h3 id="stitching-ros-constructs-together"> <a href="#stitching-ros-constructs-together" class="anchor-heading" aria-labelledby="stitching-ros-constructs-together"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Stitching ROS constructs together </h3> <p>Usually, you will have a few ROS objects in the same node, especialy if you are building a “controller” node. For example, maybe you want to send some control signals in response to the pose of an object to do visual servoing. To do this, you would:</p> <ol> <li>Use an existing driver for doing pose detection (maybe AprilTags with a camera) that publishes the pose of objects in one topic.</li> <li>Use this pressure_controller_ros driver to control pneumatic pressure as your “control inputs”. This package uses an action server to send commands to the controller.</li> <li>Build your own control node that: <ul> <li>Subscribes to the “object pose” topic with a callback function.</li> <li>Performs one step of your controller in response to each new pose estimate to obtain pressure setpoints from the pose error</li> <li>Sends new pressure setpoints to the pressure controller by sending a new goal to the “command server”</li> </ul> </li> </ol> <p>An example of this structure can be found in my Visual Servoing package:</p> <p><a href="https://github.com/cbteeple/ihm_servoing" class="btn btn-primary"><i class="fab fa-github"></i> “ihm_servoing” package on GitHub</a></p> <h2 id="running-programs"> <a href="#running-programs" class="anchor-heading" aria-labelledby="running-programs"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running Programs </h2> <p>ROS has two main ways to start nodes:</p> <ol> <li><code class="language-plaintext highlighter-rouge">rosrun</code> starts a single node directly</li> <li><code class="language-plaintext highlighter-rouge">roslaunch</code> starts several nodes with parameters and arguments as prescribed in <em>launch</em> files.</li> </ol> <p>Typical ROS drivers (including this pressure controller dirver) actually require several nodes, so usually those are nicely packaged into <em>launch</em> files. You can also combine nodes from various packages into your own <em>launch</em> files to start combinations of different drivers and control nodes. This quickly gets messy though, so sometimes it’s easier and cleaner to just make your own bash files that you run instead.</p> <hr> <div class="section-nav"> <a href="/latest/ros-driver" id="prev-section" class="btn btn-outline"> <i class="fas fa-chevron-left"></i> <div class="section-nav-content"> <div class=section-nav-crumb> <i class="fas fa-robot"></i> </div> ROS Driver </div> </a> <a href="/latest/ros-driver/setup" id="next-section" class="btn btn-outline"> <div class="section-nav-content"> <div class=section-nav-crumb> ROS Driver / </div> Hardware Setup </div> <i class="fas fa-chevron-right"></i> </a> </div> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">&copy; 2019-2022 by <a target="_blank" href="http://cbteeple.com">Clark Teeple</a></p> <div class="d-flex mt-2"> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <!--Build the modal overlay for nice picture display--> <div class="wrapper" style="position: relative"> <div id="modal-overlay"> <!-- <a href="javascript:void(0);" id="modal-prev" class="modal-main-nav modal-btn" title="Previous (Left Arrow Key)"> <i class="fas fa-chevron-circle-left"></i> </a> --> <div id="modal" title="Click anywhere to close (Esc)"> <div id="modal-content"> <a href="#" id="modal-img-a" class="img-overlay-container" title="Scroll to Image"> <img id="modal-img"/> </a> <div id="modal-description"/></div> </div> </div> <a href="javascript:void(0);" id="modal-close" class="modal-btn" title="Close (Esc)"> <i class="fas fa-times-circle"></i> </a> <div class="modal-small-nav-container"> <a href="javascript:void(0);" id="modal-prev-aux" class="modal-small-nav modal-btn" title="Previous (Left Arrow Key)"> <i class="fas fa-chevron-circle-left"></i> </a> <a href="javascript:void(0);" id="modal-next-aux" class="modal-small-nav modal-btn" title="Next (Right Arrow Key)"> <i class="fas fa-chevron-circle-right"></i> </a> </div> </div> </div> <script src="/latest/assets/js/img-modal.js"></script> <script src="/latest/assets/js/ext-links.js"></script> <script src="/latest/assets/js/switch-version.js"></script> </body> </html>
