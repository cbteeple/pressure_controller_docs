<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Plotting Data - Ctrl-P</title> <!-- Add FontAwesome to the site--> <!-- <script src="https://kit.fontawesome.com/a25c836932.js" crossorigin="anonymous"></script> --> <script type="text/javascript"> (function() { var css = document.createElement('link'); css.href = 'https://use.fontawesome.com/releases/v5.15.1/css/all.css'; css.rel = 'stylesheet'; css.type = 'text/css'; document.getElementsByTagName('head')[0].appendChild(css); })(); </script> <!-- <script defer src="/latest/assets/css/fontawesome-free-5.15.1-web/js/all.js" rel="stylesheet"></script> --> <!-- Add JQuery to the site--> <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script> <link rel="shortcut icon" href="/latest/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/latest/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-98839874-5"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-98839874-5'); </script> <script type="text/javascript" src="/latest/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/latest/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Plotting Data | Ctrl-P</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="Plotting Data" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A custom pneumatic control system featuring smooth control of pressure at a high bandwidth." /> <meta property="og:description" content="A custom pneumatic control system featuring smooth control of pressure at a high bandwidth." /> <link rel="canonical" href="/latest/top-level/plotting-data" /> <meta property="og:url" content="/latest/top-level/plotting-data" /> <meta property="og:site_name" content="Ctrl-P" /> <script type="application/ld+json"> {"description":"A custom pneumatic control system featuring smooth control of pressure at a high bandwidth.","url":"/latest/top-level/plotting-data","@type":"WebPage","headline":"Plotting Data","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/latest/assets/img/soft_hand.svg"}},"@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/latest/" class="site-title lh-tight"> <div class="site-logo"></div> <div class="site-title-text">Ctrl-P</div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/latest/" class="nav-list-link"> <div class=nav-icons><i class="fas fa-home"></i></div> Home </a></li><li class="nav-list-item"><a href="/latest/hardware" class="nav-list-link"> <div class=nav-icons><i class="fas fa-tools"></i></div> Hardware </a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/latest/firmware" class="nav-list-link"> <div class=nav-icons><i class="fas fa-microchip"></i></div> Firmware </a><ul class="nav-list "><li class="nav-list-item nav-bullets"><a href="/latest/firmware/firmware_interface" class="nav-list-link">Firmware Interface</a></li><li class="nav-list-item nav-bullets"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/latest/firmware/firmware_commands" class="nav-list-link">Firmware Commands</a><ul class="nav-list"><li class="nav-list-item nav-bullets"> <a href="/latest/firmware/firmware_commands/fw_cmd_v2" class="nav-list-link">Command Spec (v2.0)</a> </li><li class="nav-list-item nav-bullets"> <a href="/latest/firmware/firmware_commands/fw_cmd_v1" class="nav-list-link">Command Spec (v1.0)</a> </li></ul></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/latest/top-level" class="nav-list-link"> <div class=nav-icons><i class="fas fa-laptop-code"></i></div> Python Interface </a><ul class="nav-list "><li class="nav-list-item nav-bullets"><a href="/latest/top-level/setup" class="nav-list-link">Hardware Setup</a></li><li class="nav-list-item nav-bullets"><a href="/latest/top-level/tutorial" class="nav-list-link">Tutorial</a></li><li class="nav-list-item nav-bullets active"><a href="/latest/top-level/plotting-data" class="nav-list-link active">Plotting Data</a></li><li class="nav-list-item nav-bullets"><a href="/latest/top-level/python-tips" class="nav-list-link">Python Tips</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/latest/ros-driver" class="nav-list-link"> <div class=nav-icons><i class="fas fa-robot"></i></div> ROS Driver </a><ul class="nav-list "><li class="nav-list-item nav-bullets"><a href="/latest/ros-driver/tutorial" class="nav-list-link">Tutorial</a></li></ul></li><li class="nav-list-item"><a href="/latest/gallery" class="nav-list-link"> <div class=nav-icons><i class="fas fa-images"></i></div> Photo Gallery </a></li><li class="nav-list-item"><a href="/latest/todo" class="nav-list-link"> <div class=nav-icons><i class="fas fa-tasks"></i></div> TODO </a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Ctrl-P" aria-label="Search Ctrl-P" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/cbteeple/pressure_controller" class="site-button" target="_blank" rel="noopener noreferrer" > Firmware <i class="aux-icon fab fa-github"></i> </a> </li> <li class="aux-nav-list-item"> <a href="//github.com/cbteeple/pressure_control_interface" class="site-button" target="_blank" rel="noopener noreferrer" > Python Interface <i class="aux-icon fab fa-github"></i> </a> </li> <li class="aux-nav-list-item"> <a href="//github.com/cbteeple/pressure_control_cbt" class="site-button" target="_blank" rel="noopener noreferrer" > ROS Driver <i class="aux-icon fab fa-github"></i> </a> </li> <li> <div class="version-selector"> <div>Version:</div> <div> <select onchange="switch_version(this)" name="version" id="version_selecter"> <option selected value="/latest/top-level/plotting-data">latest</option> <option value="/v2.0/top-level/plotting-data">v2.0</option> <option value="/v1.0/top-level/plotting-data">v1.0</option> </select> </div> </div> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/latest/top-level">Python Interface</a></li> <li class="breadcrumb-nav-list-item"><span>Plotting Data</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="-plotting-data"> <a href="#-plotting-data" class="anchor-heading" aria-labelledby="-plotting-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <i class="fas fa-chart-bar"></i> Plotting Data </h1> <p class="label label-red fs-5">Obselete</p> <p class="fs-5">The newest version of this interface parses data directly, producing a nicely formatted CSV.</p><hr /> <ol id="markdown-toc"> <li><a href="#check-out-the-example" id="markdown-toc-check-out-the-example">Check out the example</a></li> <li><a href="#results-of-plotting-script-with-real-data" id="markdown-toc-results-of-plotting-script-with-real-data">Results of plotting script with real data</a></li> </ol><hr /> <h2 id="check-out-the-example"> <a href="#check-out-the-example" class="anchor-heading" aria-labelledby="check-out-the-example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Check out the example </h2> <p>The data from the pressure control system is saved in a nonstandard format and needs to be parsed before you can use it. As part of the python interface, there are some utillities designed for parsing data and saving the parsed data.</p> <p>Take a look at the “<em>plot_data.py</em>” example in the Python Interface for more details (copied here for ease).</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">utils.parse_data</span> <span class="kn">import</span> <span class="n">DataParser</span>
<span class="kn">from</span> <span class="nn">utils.get_files</span> <span class="kn">import</span> <span class="n">get_files_recursively</span>
<span class="kn">from</span> <span class="nn">utils.get_files</span> <span class="kn">import</span> <span class="n">get_save_path</span>


<span class="c1"># Get the desired save path from save_paths.yaml
</span><span class="n">base_path</span> <span class="o">=</span> <span class="n">get_save_path</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s">'default'</span><span class="p">)</span>

<span class="c1"># Set the folder to use within the base data folder
</span><span class="n">folder</span> <span class="o">=</span> <span class="s">'example'</span>

<span class="c1"># Parse and graph the data, then save it
</span><span class="n">data_path</span><span class="o">=</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="n">folder</span><span class="p">)</span>
<span class="n">filenames</span> <span class="o">=</span> <span class="n">get_files_recursively</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">filter_extension</span><span class="o">=</span><span class="s">'.txt'</span><span class="p">)</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">DataParser</span><span class="p">(</span><span class="n">data_path</span> <span class="o">=</span> <span class="n">data_path</span><span class="p">)</span>
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">filename_rel</span><span class="p">,</span> <span class="n">full_filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">filename_rel</span><span class="p">)</span>
    <span class="n">parser</span><span class="p">.</span><span class="n">parse_data</span><span class="p">(</span><span class="n">filename_rel</span><span class="p">)</span>
    <span class="n">parser</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename_rel</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'.txt'</span><span class="p">,</span><span class="s">'.png'</span><span class="p">),</span>
                <span class="n">ylabel</span><span class="o">=</span><span class="s">"Pressure (psi)"</span><span class="p">,</span>
                <span class="n">time_from_zero</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
    <span class="n">parser</span><span class="p">.</span><span class="n">save_data</span><span class="p">(</span><span class="n">filename_rel</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'.txt'</span><span class="p">,</span><span class="s">'.pkl'</span><span class="p">))</span>
</code></pre></div></div> <h2 id="results-of-plotting-script-with-real-data"> <a href="#results-of-plotting-script-with-real-data" class="anchor-heading" aria-labelledby="results-of-plotting-script-with-real-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Results of plotting script with real data </h2> <p><img alt="We can graph setpoints and measured pressures" src="/latest/assets/img/pressure_graph0.png" class="gallery gallery-50" /> <img alt="We can graph setpoints and measured pressures" src="/latest/assets/img/pressure_graph1.png" class="gallery gallery-50" /></p> <hr> <div class="section-nav"> <a href="/latest/top-level/tutorial" id="prev-section" class="btn btn-outline"> <i class="fas fa-chevron-left"></i> <div class="section-nav-content"> <div class=section-nav-crumb> Python Interface / </div> Tutorial </div> </a> <a href="/latest/top-level/python-tips" id="next-section" class="btn btn-outline"> <div class="section-nav-content"> <div class=section-nav-crumb> Python Interface / </div> Python Tips </div> <i class="fas fa-chevron-right"></i> </a> </div> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">&copy; 2019-2021 by <a target="_blank" href="http://cbteeple.com">Clark Teeple</a></p> <div class="d-flex mt-2"> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <!--Build the modal overlay for nice picture display--> <div class="wrapper" style="position: relative"> <div id="modal-overlay"> <!-- <a href="javascript:void(0);" id="modal-prev" class="modal-main-nav modal-btn" title="Previous (Left Arrow Key)"> <i class="fas fa-chevron-circle-left"></i> </a> --> <div id="modal" title="Click anywhere to close (Esc)"> <div id="modal-content"> <a href="#" id="modal-img-a" class="img-overlay-container" title="Scroll to Image"> <img id="modal-img"/> </a> <div id="modal-description"/></div> </div> </div> <a href="javascript:void(0);" id="modal-close" class="modal-btn" title="Close (Esc)"> <i class="fas fa-times-circle"></i> </a> <div class="modal-small-nav-container"> <a href="javascript:void(0);" id="modal-prev-aux" class="modal-small-nav modal-btn" title="Previous (Left Arrow Key)"> <i class="fas fa-chevron-circle-left"></i> </a> <a href="javascript:void(0);" id="modal-next-aux" class="modal-small-nav modal-btn" title="Next (Right Arrow Key)"> <i class="fas fa-chevron-circle-right"></i> </a> </div> </div> </div> <script src="/latest/assets/js/img-modal.js"></script> <script src="/latest/assets/js/ext-links.js"></script> <script src="/latest/assets/js/switch-version.js"></script> </body> </html>
