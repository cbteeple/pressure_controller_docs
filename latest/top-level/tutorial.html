<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Tutorial - Ctrl-P</title> <!-- Add FontAwesome to the site--> <!-- <script src="https://kit.fontawesome.com/a25c836932.js" crossorigin="anonymous"></script> --> <script type="text/javascript"> (function() { var css = document.createElement('link'); css.href = 'https://use.fontawesome.com/releases/v5.15.1/css/all.css'; css.rel = 'stylesheet'; css.type = 'text/css'; document.getElementsByTagName('head')[0].appendChild(css); })(); </script> <!-- <script defer src="/latest/assets/css/fontawesome-free-5.15.1-web/js/all.js" rel="stylesheet"></script> --> <!-- Add JQuery to the site--> <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script> <link rel="shortcut icon" href="/latest/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/latest/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-98839874-5"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-98839874-5'); </script> <script type="text/javascript" src="/latest/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/latest/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Tutorial | Ctrl-P</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="Tutorial" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A custom pneumatic control system featuring smooth control of pressure at a high bandwidth." /> <meta property="og:description" content="A custom pneumatic control system featuring smooth control of pressure at a high bandwidth." /> <link rel="canonical" href="/latest/top-level/tutorial" /> <meta property="og:url" content="/latest/top-level/tutorial" /> <meta property="og:site_name" content="Ctrl-P" /> <script type="application/ld+json"> {"headline":"Tutorial","description":"A custom pneumatic control system featuring smooth control of pressure at a high bandwidth.","url":"/latest/top-level/tutorial","@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/latest/assets/img/soft_hand.svg"}},"@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/latest/" class="site-title lh-tight"> <div class="site-logo"></div> <div class="site-title-text">Ctrl-P</div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/latest/" class="nav-list-link"> <div class=nav-icons><i class="fas fa-home"></i></div> Home </a></li><li class="nav-list-item"><a href="/latest/hardware" class="nav-list-link"> <div class=nav-icons><i class="fas fa-tools"></i></div> Hardware </a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/latest/firmware" class="nav-list-link"> <div class=nav-icons><i class="fas fa-microchip"></i></div> Firmware </a><ul class="nav-list "><li class="nav-list-item nav-bullets"><a href="/latest/firmware/firmware_interface" class="nav-list-link">Firmware Interface</a></li><li class="nav-list-item nav-bullets"><a href="/latest/firmware/firmware_commands" class="nav-list-link">Firmware Commands</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/latest/top-level" class="nav-list-link"> <div class=nav-icons><i class="fas fa-laptop-code"></i></div> Python Interface </a><ul class="nav-list "><li class="nav-list-item nav-bullets"><a href="/latest/top-level/setup" class="nav-list-link">Hardware Setup</a></li><li class="nav-list-item nav-bullets active"><a href="/latest/top-level/tutorial" class="nav-list-link active">Tutorial</a></li><li class="nav-list-item nav-bullets"><a href="/latest/top-level/python-tips" class="nav-list-link">Python Tips</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/latest/ros-driver" class="nav-list-link"> <div class=nav-icons><i class="fas fa-robot"></i></div> ROS Driver </a><ul class="nav-list "><li class="nav-list-item nav-bullets"><a href="/latest/ros-driver/ros-basics" class="nav-list-link">ROS Basics</a></li><li class="nav-list-item nav-bullets"><a href="/latest/ros-driver/setup" class="nav-list-link">Hardware Setup</a></li><li class="nav-list-item nav-bullets"><a href="/latest/ros-driver/control-setup" class="nav-list-link">Control Setup</a></li><li class="nav-list-item nav-bullets"><a href="/latest/ros-driver/tutorial" class="nav-list-link">Basic Tutorial</a></li><li class="nav-list-item nav-bullets"><a href="/latest/ros-driver/tutorial-realtime" class="nav-list-link">Realtime Control</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/latest/skills" class="nav-list-link"> <div class=nav-icons><i class="fas fa-running"></i></div> Pressure Skills </a><ul class="nav-list "><li class="nav-list-item nav-bullets"><a href="/latest/skills/setup" class="nav-list-link">Setup</a></li><li class="nav-list-item nav-bullets"><a href="/latest/skills/tutorial" class="nav-list-link">Tutorial</a></li></ul></li><li class="nav-list-item"><a href="/latest/gallery" class="nav-list-link"> <div class=nav-icons><i class="fas fa-images"></i></div> Photo Gallery </a></li><li class="nav-list-item"><a href="/latest/todo" class="nav-list-link"> <div class=nav-icons><i class="fas fa-tasks"></i></div> TODO </a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Ctrl-P" aria-label="Search Ctrl-P" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/cbteeple/pressure_controller" class="site-button" target="_blank" rel="noopener noreferrer" > Firmware <i class="aux-icon fab fa-github"></i> </a> </li> <li class="aux-nav-list-item"> <a href="//github.com/cbteeple/pressure_control_interface" class="site-button" target="_blank" rel="noopener noreferrer" > Python Interface <i class="aux-icon fab fa-github"></i> </a> </li> <li class="aux-nav-list-item"> <a href="//github.com/cbteeple/pressure_control_cbt" class="site-button" target="_blank" rel="noopener noreferrer" > ROS Driver <i class="aux-icon fab fa-github"></i> </a> </li> <li> <div class="version-selector"> <div>Version:</div> <div> <select onchange="switch_version(this)" name="version" id="version_selecter"> <option selected value="/latest/top-level/tutorial">latest</option> <option value="/v2.0/top-level/tutorial">v2.0</option> <option value="/v1.0/top-level/tutorial">v1.0</option> </select> </div> </div> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/latest/top-level">Python Interface</a></li> <li class="breadcrumb-nav-list-item"><span>Tutorial</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="-tutorial"> <a href="#-tutorial" class="anchor-heading" aria-labelledby="-tutorial"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <i class="fas fa-hands-helping"></i> Tutorial </h1> <p class="label label-purple fs-5">NEW!</p> <p class="fs-6">Works with multi-device setup!</p><hr /> <ol id="markdown-toc"> <li><a href="#common-usage-example" id="markdown-toc-common-usage-example">Common usage example:</a></li> <li><a href="#set-up-your-hardware" id="markdown-toc-set-up-your-hardware">Set up your hardware</a></li> <li><a href="#configure-the-pressure-controller" id="markdown-toc-configure-the-pressure-controller">Configure the pressure controller.</a></li> <li><a href="#set-pressure-manually" id="markdown-toc-set-pressure-manually">Set pressure manually</a></li> <li><a href="#run-a-pre-built-trajectory-on-the-controller" id="markdown-toc-run-a-pre-built-trajectory-on-the-controller">Run a pre-built trajectory on the controller</a></li> <li><a href="#plot-results" id="markdown-toc-plot-results">Plot Results</a></li> </ol><hr /> <p><em>Run these commands in a linux terminal. If you are using an IPython console (like in spyder), replace <code class="language-plaintext highlighter-rouge">python</code> with <code class="language-plaintext highlighter-rouge">run</code> at the beginning of commands.</em></p> <h2 id="common-usage-example"> <a href="#common-usage-example" class="anchor-heading" aria-labelledby="common-usage-example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Common usage example: </h2> <h3 id="commands-in-the-console"> <a href="#commands-in-the-console" class="anchor-heading" aria-labelledby="commands-in-the-console"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Commands in the console </h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Build your trajectory</span>
python build_traj.py example/setpoint_traj_demo

<span class="c"># Configure the pressure controller with the default profile</span>
<span class="c">#    This step only needs to be run when you are updating parameters.</span>
<span class="c">#    The last profile to be configured is always loaded on startup</span>
python config.py default

<span class="c"># Load the built trajectory onto the controller</span>
python send_pre_built.py example/setpoint_traj_demo

<span class="c"># Run the trajectory 1 time, and speed-stretch by 2.5x (faster)</span>
python run_pre_built.py 1 2.5
</code></pre></div></div> <h3 id="examplesetpoint_traj_demoyaml"> <a href="#examplesetpoint_traj_demoyaml" class="anchor-heading" aria-labelledby="examplesetpoint_traj_demoyaml"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> example/setpoint_traj_demo.yaml: </h3> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">settings</span><span class="pi">:</span>
    <span class="na">traj_type</span><span class="pi">:</span> <span class="s1">'</span><span class="s">interp'</span>  <span class="c1"># Types include: 'waveform', 'interp'</span>


<span class="c1"># Place all of the type-specific settings in here</span>
<span class="na">config</span><span class="pi">:</span>
    <span class="na">interp_type</span><span class="pi">:</span> <span class="s">none</span>   <span class="c1"># can be: 'linear', 'cubic'</span>
    <span class="na">setpoints</span><span class="pi">:</span> <span class="c1"># Setpoints are only used if you are doing an interpolation</span>
        <span class="c1"># [time (sec), pressure 1,2...N (psi)]</span>
        <span class="na">main</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="pi">[</span><span class="nv">0.0</span><span class="pi">,</span>   <span class="nv">10</span><span class="pi">,</span> <span class="nv">12</span><span class="pi">,</span> <span class="nv">14</span><span class="pi">,</span>  <span class="nv">16</span><span class="pi">]</span>
            <span class="pi">-</span> <span class="pi">[</span><span class="nv">1.0</span><span class="pi">,</span>    <span class="nv">20</span><span class="pi">,</span> <span class="nv">0</span><span class="pi">,</span> <span class="nv">0</span><span class="pi">,</span>  <span class="nv">0</span><span class="pi">]</span>
            <span class="pi">-</span> <span class="pi">[</span><span class="nv">2.0</span><span class="pi">,</span>   <span class="nv">0</span><span class="pi">,</span> <span class="nv">20</span><span class="pi">,</span> <span class="nv">0</span><span class="pi">,</span>  <span class="nv">0</span><span class="pi">]</span>
            <span class="pi">-</span> <span class="pi">[</span><span class="nv">3.0</span><span class="pi">,</span>     <span class="nv">0</span><span class="pi">,</span> <span class="nv">0</span><span class="pi">,</span> <span class="nv">20</span><span class="pi">,</span> <span class="nv">0</span><span class="pi">]</span>
            <span class="pi">-</span> <span class="pi">[</span><span class="nv">4.0</span><span class="pi">,</span>     <span class="nv">0</span><span class="pi">,</span> <span class="nv">0</span><span class="pi">,</span> <span class="nv">0</span><span class="pi">,</span> <span class="nv">20</span><span class="pi">]</span>
            <span class="pi">-</span> <span class="pi">[</span><span class="nv">5.0</span><span class="pi">,</span>    <span class="nv">10</span><span class="pi">,</span> <span class="nv">12</span><span class="pi">,</span> <span class="nv">14</span><span class="pi">,</span> <span class="nv">16</span><span class="pi">]</span>

        <span class="c1"># The prefix and suffix are optional. </span>
        <span class="c1"># If you don't want them, simply exclude them and the program will know what to do.</span>
        <span class="na">prefix</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="pi">[</span><span class="nv">0.000</span><span class="pi">,</span>   <span class="nv">0</span><span class="pi">,</span> <span class="nv">0</span><span class="pi">,</span> <span class="nv">0</span><span class="pi">,</span>  <span class="nv">0</span><span class="pi">]</span>
            <span class="pi">-</span> <span class="pi">[</span><span class="nv">1.0</span><span class="pi">,</span>    <span class="nv">10</span><span class="pi">,</span> <span class="nv">12</span><span class="pi">,</span> <span class="nv">14</span><span class="pi">,</span>  <span class="nv">16</span><span class="pi">]</span>

        <span class="na">suffix</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="pi">[</span><span class="nv">2.000</span><span class="pi">,</span>   <span class="nv">10</span><span class="pi">,</span> <span class="nv">12</span><span class="pi">,</span> <span class="nv">14</span><span class="pi">,</span>  <span class="nv">16</span><span class="pi">]</span>
            <span class="pi">-</span> <span class="pi">[</span><span class="nv">3.0</span><span class="pi">,</span>  <span class="nv">0</span><span class="pi">,</span> <span class="nv">0</span><span class="pi">,</span> <span class="nv">0</span><span class="pi">,</span>  <span class="nv">0</span><span class="pi">]</span>
</code></pre></div></div> <h3 id="output"> <a href="#output" class="anchor-heading" aria-labelledby="output"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output </h3> <p><img src="/latest/assets/img/setpoint_traj_demo_plot.png" alt="Plot of the &quot;setpoint_traj_demo&quot; trajectory" /></p> <h2 id="set-up-your-hardware"> <a href="#set-up-your-hardware" class="anchor-heading" aria-labelledby="set-up-your-hardware"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Set up your hardware </h2> <p>Follow the instructions in <a href="/latest/top-level/setup">Hardware Setup</a>.</p> <p>Once configured, you can pretend you have only one pressure controller with <strong><em>n</em></strong> channels. If you have multiple devices configured together, then you treat them as one controller with the total number of channels of all devices combined. This python interface does the hard work of splitting up commands to all the controllers, so for all intents and purposes, you just pretend you have one controller with a bunch of channels.</p> <h2 id="configure-the-pressure-controller"> <a href="#configure-the-pressure-controller" class="anchor-heading" aria-labelledby="configure-the-pressure-controller"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configure the pressure controller. </h2> <p>This sets a bunch of configuration settings on the controller (like which channels are on, PID gains, etc.).</p> <ol> <li>Create a config file in the <code class="language-plaintext highlighter-rouge">config</code> folder. <ul> <li>Configuration files are “<em>.yaml</em>” files with a few specific fields (see examples in the <code class="language-plaintext highlighter-rouge">config</code> folder)</li> <li>config files must be stored in the <code class="language-plaintext highlighter-rouge">config</code> folder.</li> </ul> </li> <li><code class="language-plaintext highlighter-rouge">python config.py [config_file]</code> <ul> <li><strong>config_file</strong> - name of the configuration file you want to use. It can include folders too.</li> </ul> </li> </ol> <h2 id="set-pressure-manually"> <a href="#set-pressure-manually" class="anchor-heading" aria-labelledby="set-pressure-manually"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Set pressure manually </h2> <p><code class="language-plaintext highlighter-rouge">python set_pressure.py [p1] [p2] ... [pn]</code></p> <ul> <li><strong>no arguments</strong> - Pressure is set to 0</li> <li><strong>p1</strong> - Pressure [in psi] - To set all pressure equal, send one value</li> <li><strong>p1, p2, …,pn</strong> - Pressure [in psi] - To set pressure individually, the number of pressure sent must equal the number of channels (n).</li> </ul> <p>Once running, use keyboard keys to move the pressure up and down.</p> <h2 id="run-a-pre-built-trajectory-on-the-controller"> <a href="#run-a-pre-built-trajectory-on-the-controller" class="anchor-heading" aria-labelledby="run-a-pre-built-trajectory-on-the-controller"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Run a pre-built trajectory on the controller </h2> <h3 id="set-up-a-trajectory"> <a href="#set-up-a-trajectory" class="anchor-heading" aria-labelledby="set-up-a-trajectory"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Set up a trajectory </h3> <ol> <li>Create a trajectory setup file in the <code class="language-plaintext highlighter-rouge">traj_setup</code> folder. <ul> <li>Trajectory setup files are “<em>.yaml</em>” files with a few specific fields (see examples in the <code class="language-plaintext highlighter-rouge">traj_setup/example</code> folder)</li> <li>Trajectory setup files must be stored in the <code class="language-plaintext highlighter-rouge">traj_setup</code> folder (you can use subfolders too)</li> </ul> </li> <li>There are three basic parts in a trajctory <ul> <li><strong>main</strong> - The looping part</li> <li><strong>prefix</strong> - Run once at the start of the trajectory</li> <li><strong>suffix</strong> - Run once after the looping part is finished.</li> </ul> </li> <li> <p>To forgo suffixes or prefixes, just leave them blank in the file (or delete them entirely)</p> </li> <li><em><strong>A Note about smoothness:</strong></em> <ul> <li>In the “<strong>main</strong>” part of the trajectory, the first and last lines must be the same if you want to make a smooth looping trajectory. At the lowest level, the controller jumps directly from the last line to the first line when looping.</li> <li>For a smooth <strong>prefix</strong> » <strong>main</strong> transition, the last line in the “prefix” and first line of the “main” should be the same.</li> <li>Transitions to the <strong>suffix</strong> are handled dynamically, starting from the setpoint at the exact time the suffix is requested. <ul> <li>If the <strong>main</strong> part finishes, the final line of “<strong>main</strong>” is coppied to time 0.0s in the <strong>suffix</strong></li> <li>If the <strong>main</strong> part is interrupted, the current setpoint (including interpolated values) is copied to time 0.0s of the <strong>suffix</strong>.</li> <li><em>In the example above, we dynamically transition to the first line of the <strong>suffix</strong> from wherever the setpoint currently is over 2.0 seconds.</em></li> </ul> </li> </ul> </li> </ol> <h3 id="build-a-trajectory"> <a href="#build-a-trajectory" class="anchor-heading" aria-labelledby="build-a-trajectory"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Build a trajectory </h3> <ol> <li><code class="language-plaintext highlighter-rouge">python build_traj.py [traj_profile]</code> <ul> <li><strong>traj_profile</strong> - name of trajectory you want to build. It can include folders too.</li> </ul> </li> <li>The trajectory is built, and a “<em>.traj</em>” file is saved in the <code class="language-plaintext highlighter-rouge">traj_built</code> folder</li> </ol> <h3 id="load-the-pre-built-trajectory-onto-the-controller"> <a href="#load-the-pre-built-trajectory-onto-the-controller" class="anchor-heading" aria-labelledby="load-the-pre-built-trajectory-onto-the-controller"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Load the pre-built trajectory onto the controller </h3> <p><code class="language-plaintext highlighter-rouge">python send_pre_built.py [traj_profile]</code></p> <ul> <li><strong>traj_profile</strong> - name of trajectory you just built</li> </ul> <p>You must build trajectories from setup files before you can send them. Do not try to create trajectory files yourself.</p> <h3 id="run-the-current-trajectory"> <a href="#run-the-current-trajectory" class="anchor-heading" aria-labelledby="run-the-current-trajectory"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Run the current trajectory </h3> <p>Execute the pressure trajectory you just sent</p> <p><code class="language-plaintext highlighter-rouge">python run_pre_built.py [num_cycles] [speed_factor]</code></p> <ul> <li><strong>num_cycles</strong> - Loop the main part of the trajectory this number of times. (<em>Set to -1 for endless loop</em>)</li> <li><strong>speed_factor</strong> - Speed-stretch a trajectory (<em>larger speed factor runs the trajectory faster</em>)</li> </ul> <p>This command also saves the incomming data from the pressure controller in a csv:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[time in ms] [setpoints  p1 ...... pn]  [measured  p1 ....... pn]  [input pressure] [command echos]
3848,         0.00, 0.00, 0.00, 0.00,    0.10, 0.05, 0.03, -0.07,   30.00,           , ,
3858,         0.50, 0.50, 0.50, 0.50,    0.45, 0.51, 0.46, 0.39,    29.50,           , ,
3868,         , , , ,                    , , , ,                    ,                time, 10
</code></pre></div></div> <p><em>Spaces are shown in this example for clarity, but in real csv’s there are no spaces.</em></p> <ul> <li>For pressures, data will always be returned from all channels, even if they are turned off in the configuration.</li> <li>If multiple controllers are configured together, one file per hardware device is created, with the suffix <strong>“_00X”</strong> appended to the output filename for each device.</li> <li>Data for all devices is automatically synced.</li> </ul> <h2 id="plot-results"> <a href="#plot-results" class="anchor-heading" aria-labelledby="plot-results"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Plot Results </h2> <p>Since data is saved in CSV files, it’s easy to plot them with your favorite plotting utility.</p> <p><img alt="We can graph setpoints and measured pressures" src="/latest/assets/img/pressure_graph0.png" class="gallery gallery-50" /> <img alt="We can graph setpoints and measured pressures" src="/latest/assets/img/pressure_graph1.png" class="gallery gallery-50" /></p> <hr> <div class="section-nav"> <a href="/latest/top-level/setup" id="prev-section" class="btn btn-outline"> <i class="fas fa-chevron-left"></i> <div class="section-nav-content"> <div class=section-nav-crumb> Python Interface / </div> Hardware Setup </div> </a> <a href="/latest/top-level/python-tips" id="next-section" class="btn btn-outline"> <div class="section-nav-content"> <div class=section-nav-crumb> Python Interface / </div> Python Tips </div> <i class="fas fa-chevron-right"></i> </a> </div> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">&copy; 2019-2021 by <a target="_blank" href="http://cbteeple.com">Clark Teeple</a></p> <div class="d-flex mt-2"> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <!--Build the modal overlay for nice picture display--> <div class="wrapper" style="position: relative"> <div id="modal-overlay"> <!-- <a href="javascript:void(0);" id="modal-prev" class="modal-main-nav modal-btn" title="Previous (Left Arrow Key)"> <i class="fas fa-chevron-circle-left"></i> </a> --> <div id="modal" title="Click anywhere to close (Esc)"> <div id="modal-content"> <a href="#" id="modal-img-a" class="img-overlay-container" title="Scroll to Image"> <img id="modal-img"/> </a> <div id="modal-description"/></div> </div> </div> <a href="javascript:void(0);" id="modal-close" class="modal-btn" title="Close (Esc)"> <i class="fas fa-times-circle"></i> </a> <div class="modal-small-nav-container"> <a href="javascript:void(0);" id="modal-prev-aux" class="modal-small-nav modal-btn" title="Previous (Left Arrow Key)"> <i class="fas fa-chevron-circle-left"></i> </a> <a href="javascript:void(0);" id="modal-next-aux" class="modal-small-nav modal-btn" title="Next (Right Arrow Key)"> <i class="fas fa-chevron-circle-right"></i> </a> </div> </div> </div> <script src="/latest/assets/js/img-modal.js"></script> <script src="/latest/assets/js/ext-links.js"></script> <script src="/latest/assets/js/switch-version.js"></script> </body> </html>
