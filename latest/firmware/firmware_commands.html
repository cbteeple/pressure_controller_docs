<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Firmware Commands - Ctrl-P</title> <!-- Add FontAwesome to the site--> <!-- <script src="https://kit.fontawesome.com/a25c836932.js" crossorigin="anonymous"></script> --> <script type="text/javascript"> (function() { var css = document.createElement('link'); css.href = 'https://use.fontawesome.com/releases/v5.15.1/css/all.css'; css.rel = 'stylesheet'; css.type = 'text/css'; document.getElementsByTagName('head')[0].appendChild(css); })(); </script> <!-- <script defer src="/latest/assets/css/fontawesome-free-5.15.1-web/js/all.js" rel="stylesheet"></script> --> <!-- Add JQuery to the site--> <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script> <link rel="shortcut icon" href="/latest/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/latest/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-98839874-5"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-98839874-5'); </script> <script type="text/javascript" src="/latest/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/latest/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Firmware Commands | Ctrl-P</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="Firmware Commands" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A custom pneumatic control system featuring smooth control of pressure at a high bandwidth." /> <meta property="og:description" content="A custom pneumatic control system featuring smooth control of pressure at a high bandwidth." /> <link rel="canonical" href="/latest/firmware/firmware_commands" /> <meta property="og:url" content="/latest/firmware/firmware_commands" /> <meta property="og:site_name" content="Ctrl-P" /> <script type="application/ld+json"> {"headline":"Firmware Commands","description":"A custom pneumatic control system featuring smooth control of pressure at a high bandwidth.","url":"/latest/firmware/firmware_commands","@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/latest/assets/img/soft_hand.svg"}},"@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/latest/" class="site-title lh-tight"> <div class="site-logo"></div> <div class="site-title-text">Ctrl-P</div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/latest/" class="nav-list-link"> <div class=nav-icons><i class="fas fa-home"></i></div> Home </a></li><li class="nav-list-item"><a href="/latest/hardware" class="nav-list-link"> <div class=nav-icons><i class="fas fa-tools"></i></div> Hardware </a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/latest/firmware" class="nav-list-link"> <div class=nav-icons><i class="fas fa-microchip"></i></div> Firmware </a><ul class="nav-list "><li class="nav-list-item nav-bullets"><a href="/latest/firmware/firmware_interface" class="nav-list-link">Firmware Interface</a></li><li class="nav-list-item nav-bullets active"><a href="/latest/firmware/firmware_commands" class="nav-list-link active">Firmware Commands</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/latest/top-level" class="nav-list-link"> <div class=nav-icons><i class="fas fa-laptop-code"></i></div> Python Interface </a><ul class="nav-list "><li class="nav-list-item nav-bullets"><a href="/latest/top-level/setup" class="nav-list-link">Hardware Setup</a></li><li class="nav-list-item nav-bullets"><a href="/latest/top-level/tutorial" class="nav-list-link">Tutorial</a></li><li class="nav-list-item nav-bullets"><a href="/latest/top-level/python-tips" class="nav-list-link">Python Tips</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/latest/ros-driver" class="nav-list-link"> <div class=nav-icons><i class="fas fa-robot"></i></div> ROS Driver </a><ul class="nav-list "><li class="nav-list-item nav-bullets"><a href="/latest/ros-driver/ros-basics" class="nav-list-link">ROS Basics</a></li><li class="nav-list-item nav-bullets"><a href="/latest/ros-driver/setup" class="nav-list-link">Hardware Setup</a></li><li class="nav-list-item nav-bullets"><a href="/latest/ros-driver/control-setup" class="nav-list-link">Control Setup</a></li><li class="nav-list-item nav-bullets"><a href="/latest/ros-driver/tutorial" class="nav-list-link">Basic Tutorial</a></li><li class="nav-list-item nav-bullets"><a href="/latest/ros-driver/tutorial-realtime" class="nav-list-link">Realtime Control</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/latest/skills" class="nav-list-link"> <div class=nav-icons><i class="fas fa-running"></i></div> Pressure Skills </a><ul class="nav-list "><li class="nav-list-item nav-bullets"><a href="/latest/skills/setup" class="nav-list-link">Setup</a></li><li class="nav-list-item nav-bullets"><a href="/latest/skills/tutorial" class="nav-list-link">Tutorial</a></li></ul></li><li class="nav-list-item"><a href="/latest/gallery" class="nav-list-link"> <div class=nav-icons><i class="fas fa-images"></i></div> Photo Gallery </a></li><li class="nav-list-item"><a href="/latest/todo" class="nav-list-link"> <div class=nav-icons><i class="fas fa-tasks"></i></div> TODO </a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Ctrl-P" aria-label="Search Ctrl-P" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/cbteeple/pressure_controller" class="site-button" target="_blank" rel="noopener noreferrer" > Firmware <i class="aux-icon fab fa-github"></i> </a> </li> <li class="aux-nav-list-item"> <a href="//github.com/cbteeple/pressure_control_interface" class="site-button" target="_blank" rel="noopener noreferrer" > Python Interface <i class="aux-icon fab fa-github"></i> </a> </li> <li class="aux-nav-list-item"> <a href="//github.com/cbteeple/pressure_control_cbt" class="site-button" target="_blank" rel="noopener noreferrer" > ROS Driver <i class="aux-icon fab fa-github"></i> </a> </li> <li> <div class="version-selector"> <div>Version:</div> <div> <select onchange="switch_version(this)" name="version" id="version_selecter"> <option selected value="/latest/firmware/firmware_commands">latest</option> <option value="/v2.0/firmware/firmware_commands">v2.0</option> <option value="/v1.0/firmware/firmware_commands">v1.0</option> </select> </div> </div> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/latest/firmware">Firmware</a></li> <li class="breadcrumb-nav-list-item"><span>Firmware Commands</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="firmware-commands"> <a href="#firmware-commands" class="anchor-heading" aria-labelledby="firmware-commands"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Firmware Commands </h1> <ol id="markdown-toc"> <li><a href="#structure" id="markdown-toc-structure">Structure</a></li> <li><a href="#command-specification" id="markdown-toc-command-specification">Command Specification</a></li> </ol><hr /> <h2 id="structure"> <a href="#structure" class="anchor-heading" aria-labelledby="structure"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Structure </h2> <p>Commands follow a simple “COMMAND+ARGUMENTS” structure, with the separator character being the semicolon.</p> <p>Send the command followed by some number of arguments depending on the command. Always end the line with a “newline”.</p> <p>Examples:</p> <ul> <li>[<strong>COMMAND</strong>]<strong>;</strong>[<strong>ARG_1</strong>]<strong>;</strong>[<strong>ARG_2</strong>]<strong>;</strong>…<strong>;</strong>[<strong>ARG_N</strong>]</li> <li><strong>chan;1;0;0;1</strong> - turns on channels 0 and 3, and turns 1 and 2 off (assuming there are exactly 4 output channels)</li> </ul> <p>To view the current settings of any of the parameters you can control, simply use the commands below, but omit any arguments you would normally put after the commands.</p> <h2 id="command-specification"> <a href="#command-specification" class="anchor-heading" aria-labelledby="command-specification"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Command Specification </h2> <p>A comprehensive set of command specifications can be found in the <a href="https://github.com/cbteeple/pressure_control_interface/tree/main/pressure_control_interface/utils/command_spec">pressure_control_interface</a> package. This documentation expands on the functionality of each command.</p> <h3 id="system-commands"> <a href="#system-commands" class="anchor-heading" aria-labelledby="system-commands"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> System Commands </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Command</th> <th>Arguments</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>FIRMWARE</td> <td>n/a</td> <td>Return the firmware version</td> </tr> <tr> <td>CMDSPEC</td> <td>n/a</td> <td>Return the internal version of the command spec used</td> </tr> <tr> <td>ERROR</td> <td>n/a</td> <td>Return the error states of the pressure watchdogs (input and channels)</td> </tr> </tbody> </table></div> <h3 id="basic-commands"> <a href="#basic-commands" class="anchor-heading" aria-labelledby="basic-commands"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Basic Commands </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Command</th> <th>Arguments</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>ON</td> <td>n/a</td> <td>Start the live pressure output</td> </tr> <tr> <td>OFF</td> <td>n/a</td> <td>Stop the live pressure output</td> </tr> <tr> <td>LOAD</td> <td>n/a</td> <td>Load settings from onboard storage</td> </tr> <tr> <td>SAVE</td> <td>n/a</td> <td>Overwrite the current settings profile in onboard storage</td> </tr> <tr> <td>MODE</td> <td>#1 <code class="language-plaintext highlighter-rouge">int (enum)</code></td> <td>Set the control mode</td> </tr> <tr> <td> </td> <td> </td> <td>0 = direct control of valve states</td> </tr> <tr> <td> </td> <td> </td> <td>1 = pressure control using PID and sensors)</td> </tr> <tr> <td> </td> <td> </td> <td>2 = pressure trajectory following</td> </tr> <tr> <td> </td> <td> </td> <td>3 = pressure control with ramp from current setpoint to new one</td> </tr> <tr> <td>ECHO</td> <td>#1 <code class="language-plaintext highlighter-rouge">bool</code></td> <td>Set whether commands are echoed</td> </tr> <tr> <td> </td> <td> </td> <td>0 = Off - No commands are echoed back (silent mode)</td> </tr> <tr> <td> </td> <td> </td> <td>1 = On - commands are echoed back on the serial line. Command echos are always preceded by an underscore</td> </tr> <tr> <td>TIME</td> <td>#1 <code class="language-plaintext highlighter-rouge">int</code></td> <td>Set the desired loop time for measurement outputs (in ms)</td> </tr> <tr> <td>UNITS</td> <td>#1 <code class="language-plaintext highlighter-rouge">int (enum)</code></td> <td>Set the pressure units you want to use: <code class="language-plaintext highlighter-rouge">{0: psi, 1: kPa, 2: bar, 3:atm}</code></td> </tr> <tr> <td> </td> <td>[#1;#2]</td> <td>Set the input and output units separately</td> </tr> <tr> <td> </td> <td> </td> <td>#1 <code class="language-plaintext highlighter-rouge">int</code> = input units: used for setting setpoints and loading trajectories</td> </tr> <tr> <td> </td> <td> </td> <td>#2 <code class="language-plaintext highlighter-rouge">int</code> = output units: used for displaying data</td> </tr> <tr> <td>CURRTIME</td> <td>#1 <code class="language-plaintext highlighter-rouge">int</code></td> <td>Set the current display time on the controller (in ms). Typically used to synchronize with other devices (i.e. set current time to zero when you start a trajectory)</td> </tr> </tbody> </table></div> <p><em>NOTE: Units are converted at the command/output level. Pressures are always internally represented in psi regaurdless of what the units are set to.</em></p> <h3 id="safety-settings"> <a href="#safety-settings" class="anchor-heading" aria-labelledby="safety-settings"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Safety Settings </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Command</th> <th>Arguments</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>MAXP</td> <td>#1 <code class="language-plaintext highlighter-rouge">float</code></td> <td>Set the maximum pressure allowed. Pressures are clipped if outside this range when using the “SET” command, but not when loaded as part of a trajectory. (<em>used for the pressure watchdog</em>)</td> </tr> <tr> <td>MINP</td> <td>#1 <code class="language-plaintext highlighter-rouge">float</code></td> <td>Set the minimum pressure allowed. Pressures are clipped if outside this range when using the “SET” command, but not when loaded as part of a trajectory.</td> </tr> <tr> <td>SPIKE</td> <td>#1 <code class="language-plaintext highlighter-rouge">int</code></td> <td>Set the desired spike time for the channel watchdog (in ms). This is the minimum time above the threshold before watchdog triggers</td> </tr> <tr> <td>MASTERP</td> <td>#1 <code class="language-plaintext highlighter-rouge">bool</code></td> <td>use input pressure sensor for watchdog</td> </tr> <tr> <td> </td> <td>[#1;#2]</td> <td> </td> </tr> <tr> <td> </td> <td> </td> <td>#1 <code class="language-plaintext highlighter-rouge">bool</code> = use input pressure sensor for watchdog</td> </tr> <tr> <td> </td> <td> </td> <td>#2 <code class="language-plaintext highlighter-rouge">bool</code> = pressure sensor data output on/off</td> </tr> <tr> <td>MASTERMAXP</td> <td>[#1;#2]</td> <td>Set the maximum pressure before the master watchdog triggers, as well as the</td> </tr> <tr> <td> </td> <td> </td> <td>#1 <code class="language-plaintext highlighter-rouge">float</code> = maximum pressure threshold</td> </tr> <tr> <td> </td> <td> </td> <td>#2 <code class="language-plaintext highlighter-rouge">int</code> = minimum time above the threshold before watchdog triggers</td> </tr> </tbody> </table></div> <h3 id="control-channels"> <a href="#control-channels" class="anchor-heading" aria-labelledby="control-channels"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Control Channels </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Command</th> <th>Arguments</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>CHAN</td> <td>#1 <code class="language-plaintext highlighter-rouge">bool</code></td> <td>Set all channels active or inactive</td> </tr> <tr> <td> </td> <td>[#1;#2;…;#N] <code class="language-plaintext highlighter-rouge">list(bool)</code></td> <td>Set individual channels active *. Replace “#” with either 1 or 0 for on or off.</td> </tr> <tr> <td>SET</td> <td>[#1;#2]</td> <td>Set the pressure setpoint of ALL pressure channels. <em>This setting is only used if MODE is set to 1 or 3.</em></td> </tr> <tr> <td> </td> <td> </td> <td>#1 <code class="language-plaintext highlighter-rouge">float</code> = ramp time in seconds - <em>only used if MODE is set to 3</em></td> </tr> <tr> <td> </td> <td> </td> <td>#2 <code class="language-plaintext highlighter-rouge">float</code> = Setpoint</td> </tr> <tr> <td> </td> <td>[#1;#2;…;#N;#N+1] <code class="language-plaintext highlighter-rouge">list(float)</code></td> <td>Set the pressure setpoint of individual pressure channels*.</td> </tr> <tr> <td> </td> <td> </td> <td>#1 <code class="language-plaintext highlighter-rouge">float</code> = ramp time in seconds - <em>only used if MODE is set to 3</em></td> </tr> <tr> <td> </td> <td> </td> <td>#2;…;#N+1 <code class="language-plaintext highlighter-rouge">list(float)</code> = Setpoints for each channel</td> </tr> <tr> <td>VALVE</td> <td>#1 <code class="language-plaintext highlighter-rouge">float</code></td> <td>Set the valve states of ALL pressure channels (can be -1.0 → 1.0). <em>This setting is only used if MODE is set to 0.</em></td> </tr> <tr> <td> </td> <td> </td> <td>-1.0 = vent at full speed</td> </tr> <tr> <td> </td> <td> </td> <td>0.0 = idle (both valves in the pair are closed)</td> </tr> <tr> <td> </td> <td> </td> <td>1.0 = pressurize to full input pressure at full speed</td> </tr> <tr> <td> </td> <td>[#0;#1;…;#N-1] <code class="language-plaintext highlighter-rouge">list(float)</code></td> <td>Set the valve state of individual channels* (<code class="language-plaintext highlighter-rouge">float</code>).</td> </tr> </tbody> </table></div> <p><em>When setting things for individual channels, the number of arguments must equal the number of channels.</em></p> <h3 id="controller-settings"> <a href="#controller-settings" class="anchor-heading" aria-labelledby="controller-settings"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Controller Settings </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Command</th> <th>Arguments</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>PID</td> <td>[#1; #2; #3; #4]</td> <td>Set the PID gains for one particular channel</td> </tr> <tr> <td> </td> <td> </td> <td>#1 <code class="language-plaintext highlighter-rouge">int</code> = Channel index</td> </tr> <tr> <td> </td> <td> </td> <td>#2 <code class="language-plaintext highlighter-rouge">float</code> = Proportional gain</td> </tr> <tr> <td> </td> <td> </td> <td>#3 <code class="language-plaintext highlighter-rouge">float</code> = Integral gain</td> </tr> <tr> <td> </td> <td> </td> <td>#4 <code class="language-plaintext highlighter-rouge">float</code> = Derivative gain</td> </tr> <tr> <td>WINDOW</td> <td>#1 <code class="language-plaintext highlighter-rouge">float</code></td> <td>Set the dead window for all channels. This is a window around the setpoint in which control is turned off. <em>Default is 0 (control always on)</em></td> </tr> <tr> <td> </td> <td>[#0;#1;…;#N-1] <code class="language-plaintext highlighter-rouge">list(float)</code></td> <td>Set the dead window for individual channels *.</td> </tr> <tr> <td>INTSTART</td> <td>#1 <code class="language-plaintext highlighter-rouge">float</code></td> <td>Set the window (in pressure space) around the setpoint in which the integrator works</td> </tr> <tr> <td>VOFFSET</td> <td>[#1; #2; #3]</td> <td>Set the PWM offset values for valves one particular channel</td> </tr> <tr> <td> </td> <td> </td> <td>#1 <code class="language-plaintext highlighter-rouge">int</code> = Channel index</td> </tr> <tr> <td> </td> <td> </td> <td>#2 <code class="language-plaintext highlighter-rouge">int</code> = Supply valve offset (can be 0 → 255)</td> </tr> <tr> <td> </td> <td> </td> <td>#3 <code class="language-plaintext highlighter-rouge">int</code> = Vent valve offset (can be 0 → 255)</td> </tr> </tbody> </table></div> <p><em>When setting things for individual channels, the number of arguments must equal the number of channels.</em></p> <h3 id="set-up-trajectories"> <a href="#set-up-trajectories" class="anchor-heading" aria-labelledby="set-up-trajectories"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Set Up Trajectories </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Command</th> <th>Arguments</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>TRAJCONFIG</td> <td>[#1; #2; #3; #4]</td> <td>Set the trajectory settings</td> </tr> <tr> <td> </td> <td> </td> <td>#1 <code class="language-plaintext highlighter-rouge">int</code> = Prefix length</td> </tr> <tr> <td> </td> <td> </td> <td>#2 <code class="language-plaintext highlighter-rouge">int</code> = Main trajectory length</td> </tr> <tr> <td> </td> <td> </td> <td>#3 <code class="language-plaintext highlighter-rouge">int</code> = Suffix length</td> </tr> <tr> <td> </td> <td> </td> <td>#4 <code class="language-plaintext highlighter-rouge">bool</code> = Run the suffix trajectory after stop</td> </tr> <tr> <td>TRAJWRAP</td> <td>#1 <code class="language-plaintext highlighter-rouge">bool</code></td> <td>Wrap the trajectory (<em>Same functionality can be achieved using TRAJLOOP</em>)</td> </tr> <tr> <td> </td> <td> </td> <td>0 = Off - trajectory excecutes once</td> </tr> <tr> <td> </td> <td> </td> <td>1 = On - loop over and over until stopped</td> </tr> <tr> <td>TRAJLOOP</td> <td>#1 <code class="language-plaintext highlighter-rouge">int</code></td> <td>Number of times to loop</td> </tr> <tr> <td> </td> <td> </td> <td>-1 = Loop Forever until the TRAJSTOP command is sent</td> </tr> <tr> <td> </td> <td> </td> <td>0 = Skip the main loop</td> </tr> <tr> <td> </td> <td> </td> <td>1,2,… = Do the main loop this many times</td> </tr> <tr> <td>TRAJSPEED</td> <td>#1 <code class="language-plaintext highlighter-rouge">float</code></td> <td>Stretch the speed of the trajectory</td> </tr> <tr> <td> </td> <td> </td> <td>1.0 - base speed</td> </tr> <tr> <td> </td> <td> </td> <td>&gt;1.0 - Faster than base speed</td> </tr> <tr> <td> </td> <td> </td> <td>&lt;1.0 - Slower than base speed (can never be 0; if 0 is sent, no changes are made)</td> </tr> <tr> <td>TRAJSET</td> <td>[#1, #2, #3;…;#N+2]</td> <td>Set the main trajectory line by line</td> </tr> <tr> <td> </td> <td> </td> <td>#1 <code class="language-plaintext highlighter-rouge">int</code> = index (can be 0 → max_length-1)</td> </tr> <tr> <td> </td> <td> </td> <td>#2 <code class="language-plaintext highlighter-rouge">float</code> = time point</td> </tr> <tr> <td> </td> <td> </td> <td>#3;…;#N+2 <code class="language-plaintext highlighter-rouge">list(float)</code> = pressure setpoints for each channel, where the row is zero-padded if the number of inputs is less than the number of total channels</td> </tr> <tr> <td>PREFSET</td> <td>[#1, #2, #3;…;#N+2]</td> <td>Set the prefix trajectory line by line (works exactly like TRAJSET)</td> </tr> <tr> <td>SUFFSET</td> <td>[#1, #2, #3;…;#N+2]</td> <td>Set the prefix trajectory line by line (works exactly like TRAJSET)</td> </tr> </tbody> </table></div> <h3 id="run-trajectories"> <a href="#run-trajectories" class="anchor-heading" aria-labelledby="run-trajectories"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Run Trajectories </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Command</th> <th>Arguments</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>TRAJSTART</td> <td>[none]</td> <td>Start the trajectory from the beginning. Run suffix first, then run trajectory until stop is called or it finishes. If wrapping is set, loop over the main trajectory until stop is called. )</td> </tr> <tr> <td>TRAJSTOP</td> <td>[none]</td> <td>Stop the trajectory and return to 0 pressure</td> </tr> <tr> <td>TRAJPAUSE</td> <td>[none]</td> <td>Pause the trajectory and hold pressure</td> </tr> <tr> <td>TRAJRESUME</td> <td>[none]</td> <td>Resume the trajectory</td> </tr> </tbody> </table></div> <h3 id="others"> <a href="#others" class="anchor-heading" aria-labelledby="others"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Others </h3> <div class="table-wrapper"><table> <thead> <tr> <th>Command</th> <th>Arguments</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>DEFLOAD</td> <td>[none]</td> <td>Load default settings profile from onboard storage</td> </tr> <tr> <td>DEFSAVE</td> <td>[none]</td> <td>Overwrite default settings profile settings to onboard storage</td> </tr> <tr> <td>LCDTIME</td> <td>#1 <code class="language-plaintext highlighter-rouge">int</code></td> <td>Set the desired refresh time for the LCD screen if attached (in ms)</td> </tr> </tbody> </table></div> <hr> <div class="section-nav"> <a href="/latest/firmware/firmware_interface" id="prev-section" class="btn btn-outline"> <i class="fas fa-chevron-left"></i> <div class="section-nav-content"> <div class=section-nav-crumb> Firmware / </div> Firmware Interface </div> </a> <a href="/latest/top-level" id="next-section" class="btn btn-outline"> <div class="section-nav-content"> <div class=section-nav-crumb> <i class="fas fa-laptop-code"></i> </div> Python Interface </div> <i class="fas fa-chevron-right"></i> </a> </div> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">&copy; 2019-2022 by <a target="_blank" href="http://cbteeple.com">Clark Teeple</a></p> <div class="d-flex mt-2"> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <!--Build the modal overlay for nice picture display--> <div class="wrapper" style="position: relative"> <div id="modal-overlay"> <!-- <a href="javascript:void(0);" id="modal-prev" class="modal-main-nav modal-btn" title="Previous (Left Arrow Key)"> <i class="fas fa-chevron-circle-left"></i> </a> --> <div id="modal" title="Click anywhere to close (Esc)"> <div id="modal-content"> <a href="#" id="modal-img-a" class="img-overlay-container" title="Scroll to Image"> <img id="modal-img"/> </a> <div id="modal-description"/></div> </div> </div> <a href="javascript:void(0);" id="modal-close" class="modal-btn" title="Close (Esc)"> <i class="fas fa-times-circle"></i> </a> <div class="modal-small-nav-container"> <a href="javascript:void(0);" id="modal-prev-aux" class="modal-small-nav modal-btn" title="Previous (Left Arrow Key)"> <i class="fas fa-chevron-circle-left"></i> </a> <a href="javascript:void(0);" id="modal-next-aux" class="modal-small-nav modal-btn" title="Next (Right Arrow Key)"> <i class="fas fa-chevron-circle-right"></i> </a> </div> </div> </div> <script src="/latest/assets/js/img-modal.js"></script> <script src="/latest/assets/js/ext-links.js"></script> <script src="/latest/assets/js/switch-version.js"></script> </body> </html>
